<?xml version="1.0" encoding="UTF-8"?>
<project>
  <target name="debug">
    <antcall target="-generate-from-dist-files">
      <param name="BANNER_AD_UNIT_ID" value="" />
    </antcall>
    <antcall target="android_rules.debug" />
  </target>

  <target name="debug-ads">
    <antcall target="-generate-from-dist-files">
      <param name="BANNER_AD_UNIT_ID" value="${BANNER_AD_UNIT_ID}" />
    </antcall>
    <antcall target="android_rules.debug" />
  </target>

  <target name="-generate-from-dist-files">
    <!-- If not all of the ad unit IDs are set, then disable ad support. -->
    <condition property="XML_COMMENT_START_WHEN_ADS_OFF" value="&lt;!--"
               else="">
      <equals arg1="${BANNER_AD_UNIT_ID}" arg2="" />
    </condition>
    <condition property="XML_COMMENT_END_WHEN_ADS_OFF" value="--&gt;" else="">
      <equals arg1="${BANNER_AD_UNIT_ID}" arg2="" />
    </condition>
    <!-- Process te AndroidManifest.xml file. -->
    <echo message="Generating AndroidManifest.xml" />
    <exec executable="./replace.py">
      <arg value="AndroidManifest.dist.xml" />
      <arg value="AndroidManifest.xml" />
      <arg value="&lt;COMMENT_WHEN_ADS_OFF&gt;" />
      <arg value="${XML_COMMENT_START_WHEN_ADS_OFF}" />
      <arg value="&lt;/COMMENT_WHEN_ADS_OFF&gt;" />
      <arg value="${XML_COMMENT_END_WHEN_ADS_OFF}" />
    </exec>

    <!-- Process the strings.xml file. -->
    <echo message="Generating res/values/strings.dist.xml" />
    <exec executable="./replace.py">
      <arg value="res/values/strings.dist.xml" />
      <arg value="res/values/strings.xml" />
      <!-- Insert ad unit ID. -->
      <arg value="{{{BANNER_AD_UNIT_ID}}}" />
      <arg value="${BANNER_AD_UNIT_ID}" />
    </exec>

    <!-- If not all of the ad unit IDs are set, then disable AdManager. -->
    <condition property="JAVA_COMMENT_START_WHEN_ADS_OFF" value="/*" else="">
      <equals arg1="${BANNER_AD_UNIT_ID}" arg2="" />
    </condition>
    <condition property="JAVA_COMMENT_END_WHEN_ADS_OFF" value="*/" else="">
      <equals arg1="${BANNER_AD_UNIT_ID}" arg2="" />
    </condition>
    <!-- Process the AdManager.java file. -->
    <echo message="Generating src/info/meoblast001/thugaim/AdManager.java" />
    <exec executable="./replace.py">
      <arg value="src-dist/info/meoblast001/thugaim/AdManager.dist.java" />
      <arg value="src/info/meoblast001/thugaim/AdManager.java" />
      <arg value="//{{{COMMENT_START_WHEN_ADS_OFF}}}" />
      <arg value="${JAVA_COMMENT_START_WHEN_ADS_OFF}" />
      <arg value="//{{{COMMENT_END_WHEN_ADS_OFF}}}" />
      <arg value="${JAVA_COMMENT_END_WHEN_ADS_OFF}" />
    </exec>
  </target>
</project>
